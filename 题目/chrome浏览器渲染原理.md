### 浏览器渲染原理：
[链接](https://segmentfault.com/a/1190000038468748#shareToWeibo)
首先，JavaScript引擎是基于事件驱动单线程执行的，渲染线程负责渲染浏览器界面，
但是GUI渲染线程与JS引擎是互斥的，当JS引擎执行时GUI线程会被挂起，GUI的更新也会被保存在—个队列中，等到JS引擎空闲时才有机会被执行。

#### （1）什么是DOCTYPE及作用
DOCTYPE是用来声明文档类型和DTD规范的，一个主要的用途便是文件的合法性验证。如果文件代码不合法，那么浏览器解析时便会出一些差错。

#### （2）浏览器渲染过程

#### （3）重排Reflow
重排的定义：
  DOM结构中的各个元素都有自己的盒子模型，这些都需要浏览器根据各种样式来计算并根据计算结果将元素放到它该出现的位置，这个过程称之为reflow。
  当你增加，删除，修改Dom节点时会导致Reflow或Repaint
  当你移动DOM的位置，或是搞个动画的时候
  当你修改CSS样式的时候
  当你Resize窗口的时候，或是滚动的时候当你修改网页的默认字体时

#### （4）重绘Repaint
重绘的定义：
  当各种盒子的位置，大小以及其他属性，例如颜色，字体大小等都确定下来后，浏览器于是便把这些元素都按照各自的特性绘制了一遍，于是页面的内容出现了，这个过程称为repaint。
触发Reflow的情况：
  DOM改动
  CSS改动

#### （5）布局Layout

几个概念：
  DOM: Document Object Model，浏览器将HTML解析成树形的数据结构
  cSSOM: CSs Object Model，浏览器将CSS解析成树形的数据结构
  Render Tree: DOM和CSSOM合并生成Render Tree
  Layout:计算出Render Tree每个节点的具体位置
  Painting:通过显卡，将Layout后的节点内容分别呈现到屏幕上

浏览器的主要功能？
  向服务器发出请求，在浏览器窗口中展示选择的网络资源，资源一般指HTML文档，可以是PDF，图片或其他的类型。资源的位置由用户使用URL获取。

渲染机制？
  浏览器从接收到页面开始到页面显示，这整个过程中的所有步骤，称关键渲染路径，一般分为两步:页面内容加载完成和页面资源完成，分别对应于DOMContentLoaded和Load。
  步骤：
    解析HTML，生成DOM树(DOM)
    解析CSs，生成cSSOM树
    将DOM和CSSOM合并，生成渲染树(Rendere-Tree)
    计算渲染树的布局Layout
    将布局渲染到屏幕上Paint

为什么要了解浏览器渲染页面机制？
  了解浏览器如何进行加载，引用外部样式文件，JS文件时，将它们放到合适的位置，是浏览器最快的速度让文件加载完毕;
  了解浏览器如何进行解析，选择最优的写法，构建DOM结构，组织CSS选择器的时候，是为了提高浏览器的解析速率;
  了解浏览器如何进行渲染，是可以减少"重绘”，“重新布局"的消耗。

浏览器页面渲染：
  第一步:在CSS资源还没有请求回来之前，先生成DOM树;
  第二步:当所有的CSS请求回来之后，浏览器按照CSS的导入顺序，依次进行渲染，最后生成CSSOM树;
  第三步:把DOM树和CSSOM树结合在一起，生成有样式，有结构的RENDER TREE渲染树;
  最后—步:浏览器按照渲染树，在页面中进行渲染和解析

为什么要构建DOM树：
  因为浏览器不能直接理解和使用HTML，所以需要将HTML转换为浏览器能够理解的结构，即是DOM树。

样式计算：
  样式计算的目的是为了计算出DOM节点中每个元素的具体样式
  三步走：
    把CSS转换为浏览器能够理解的结构
    转换样式表中的属性值，使其标准化
    计算出DOM树中每个节点的具体样式(涉及到CSS的继承规则和层叠规则)

布局：
  计算出DOM树中可见元素的几何位置，第一创建布局树(构建一棵只包含可见元素布局树)，第二布局计算；

CSS加载会阻塞页面显示吗？
  css加载不会阻塞DOM树的解析
  css加载会阻塞DOM树的渲染
  css加载会阻塞后面js语句的执行
  为了避免让用户看到长时间的白屏时间，应该提高css的加载速度

为了防止css阻塞，引起页面白屏，可以提高页面加载速度？
  使用cdn
  对css进行压缩，合理利用缓存
  减少http请求，将多个css文件合并

分层：
  渲染引擎给页面分了很多图层，这些图层按照一定顺序叠加在一起，就形成了最终的页面。
  完成图层树的构建后，渲染引擎会对图层树中的每个图层进行绘制，为图层绘制。
  然后进行棚格化(raster）操作（绘制列表只是用来记录绘制顺序和绘制指令的列表，而实际上绘制操作是由渲染引擎中的合成线程来完成的）。
  最后合成与显示。

回流(reflow):
  当render tree中的一部分因为元素的规模尺寸，布局，隐藏等改变而需要重新构建，这就称为回流(reflow)。
  每个页面至少需要一次回流，就是在页面第一次加载的时候。
  定义：DOM中各个元素都有自己的盒子模型，需要浏览器根据样式进行计算，并根据计算结果将元素放到特定位置，这就是Reflow
  触发Reflow的条件:
    增、删、改、移DOM
    修改CSS样式
    Resize窗口
    页面滚动
    修改网页的默认字体

重绘(Repaint):
  在回流的时候，浏览器会使渲染树中受到影响的部分失效，并重新构造这部分渲染树，完成回流后，浏览器会重新绘制受影响的部分到屏幕中，该过程成为重绘(Repaint)。
  当render tree中的一些元素需要更新属性，而这些属性只是影响元素的外观，风格，而不会影响布局的，比如background-color。就叫称为重绘。
  定义：当各种盒子的位置、大小以及其他属性改变时，浏览器需要把这些元素都按照各自的特性绘制一遍，这个过程称为Repaint。
  触发Repaint的条件：
    DOM改动
    CSS改动

如何减少重绘、避免重排？  合并修改




